<header class="gblog-header">
  <div class="container flex flex-wrap">
    <div class="gblog-header__col-1 flex justify-start">
    </div>
    <div class="gblog-header__col-2 flex align-center justify-center ">
      <a class="gblog-header__link" rel="me" href="{{ .Site.Home.Permalink }}">
        <span class="gblog-brand flex align-center justify-center">
          <img
            class="gblog-brand__img"
            src="{{ (default "brand.svg" .Site.Params.logo) | relURL }}"
            alt=""
          />
          <span class="gblog-brand__title">{{ .Site.Title }}</span>
        </span>
        {{ with .Site.Params.subtitle }}
          <span class="gblog-brand__subtitle flex align-center justify-center">{{ . }}</span>
        {{ end }}
      </a>
    </div>
    <div class="gblog-header__col-3 flex justify-end align-center">
      <span id="gblog-color-theme">
        <svg class="gblog-icon gblog_brightness_dark">
          <title>{{ i18n "button_toggle_dark" }}</title>
          <use xlink:href="#gblog_brightness_dark"></use>
        </svg>
        <svg class="gblog-icon gblog_brightness_light">
          <title>{{ i18n "button_toggle_dark" }}</title>
          <use xlink:href="#gblog_brightness_light"></use>
        </svg>
        <svg class="gblog-icon gblog_brightness_auto">
          <title>{{ i18n "button_toggle_dark" }}</title>
          <use xlink:href="#gblog_brightness_auto"></use>
        </svg>
      </span>
    </div>
  </div>
</header>
<nav class="gblog-nav" id="main-nav">
  <!-- Left: Social Icons -->
  <div class="gblog-nav__social flex align-center">
    {{ if .Site.Data.menu.extra.header }}
      {{ range .Site.Data.menu.extra.header }}
        <a href="{{ .ref }}" {{ if .external }}target="_blank" rel="noopener noreferrer"{{ end }} title="{{ .name }}">
          <svg class="gblog-icon {{ .icon }}"><use xlink:href="#{{ .icon }}"></use></svg>
        </a>
      {{ end }}
    {{ end }}
  </div>

  <!-- Center: Search -->
  <div class="gblog-nav__search">
    <form action="{{ "search/" | relURL }}" method="get" class="gblog-search-form">
      <button type="button" class="gblog-search__toggle" aria-label="Toggle search">
        <svg class="gblog-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>
      <input type="search" name="q" class="gblog-search__input" placeholder="Search posts..." aria-label="Search">
    </form>
  </div>

  <!-- Right: Tag Button -->
  <button class="gblog-nav__tag-btn" id="tag-menu-btn" aria-expanded="false" aria-haspopup="true" aria-label="Browse tags">
    <span class="gblog-nav__tag-icon">#</span>
  </button>

  <!-- Tag Menu Dropdown -->
  <div class="gblog-tag-menu" id="tag-menu" role="menu" aria-hidden="true">
    <div class="gblog-tag-menu__content">
      <div class="gblog-tag-menu__header">
        <button class="gblog-tag-menu__action" data-action="all">All</button>
        <button class="gblog-tag-menu__action" data-action="clear">Clear</button>
      </div>
      <div class="gblog-tag-menu__tags">
        {{ $currentPage := .RelPermalink }}
        {{ if default true .Site.Params.geekblogTagsToMenu }}
          {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
            {{ with $.Site.GetPage (printf "/tags/%s" $name) }}
              <a
                class="gblog-tag-pill{{ if eq $currentPage .RelPermalink }} is-active{{ end }}"
                href="{{ .RelPermalink }}"
                role="menuitem"
                data-tag="{{ $name }}"
              >
                {{ partial "utils/title" . }}
              </a>
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</nav>
